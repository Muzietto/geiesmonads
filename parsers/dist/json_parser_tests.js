define(['chai', 'json_parsers', 'classes'], function (_chai, _json_parsers, _classes) {
    'use strict';

    var text = _classes.Position.fromText;

    describe('building a JSON parser', function () {
        describe('a parser for JNull\'s', function () {
            it('parses the string \'null\' and returns a JValue.JNull', function () {
                var run = _json_parsers.JNullP.run('null');
                (0, _chai.expect)(run.isSuccess).to.be.true;
                (0, _chai.expect)(run.value[0].isJNull).to.be.true;
                (0, _chai.expect)(_json_parsers.JNullP.run('nulx').isFailure).to.be.true;
            });
        });
        describe('a parser for JBool\'s', function () {
            it('parses the string \'true\' and returns a JValue.JBool(true)', function () {
                var run = _json_parsers.JBoolP.run('true');
                (0, _chai.expect)(run.isSuccess).to.be.true;
                (0, _chai.expect)(run.value[0].isJBool).to.be.true;
                (0, _chai.expect)(run.value[0].value).to.be.true;
            });
            it('parses the string \'false\' and returns a JValue.JBool(false)', function () {
                var run = _json_parsers.JBoolP.run('false');
                (0, _chai.expect)(run.isSuccess).to.be.true;
                (0, _chai.expect)(run.value[0].isJBool).to.be.true;
                (0, _chai.expect)(run.value[0].value).to.be.false;
            });
            it('fails to parse anything else', function () {
                (0, _chai.expect)(_json_parsers.JBoolP.run('trux').isFailure).to.be.true;
            });
        });
        describe('a parser for JSON unescaped chars', function () {
            it('parses an unescaped character and returns a Success', function () {
                (0, _chai.expect)(_json_parsers.jUnescapedCharP.run(text('a')).isSuccess).to.be.true;
                (0, _chai.expect)(_json_parsers.jUnescapedCharP.run(text('A')).isSuccess).to.be.true;
                (0, _chai.expect)(_json_parsers.jUnescapedCharP.run(text('1')).isSuccess).to.be.true;
                (0, _chai.expect)(_json_parsers.jUnescapedCharP.run(text('"')).isFailure).to.be.true;
                (0, _chai.expect)(_json_parsers.jUnescapedCharP.run(text('\\')).isFailure).to.be.true;
            });
        });
        describe('a parser for JSON escaped chars', function () {
            it('parses an escaped character and returns a Success', function () {
                (0, _chai.expect)(_json_parsers.jEscapedCharP.run(text('\b')).isSuccess).to.be.true;
                (0, _chai.expect)(_json_parsers.jEscapedCharP.run(text('\f')).isSuccess).to.be.true;
                //            expect(jEscapedCharP.run(text('\n')).isSuccess).to.be.true;
                (0, _chai.expect)(_json_parsers.jEscapedCharP.run(text('\r')).isSuccess).to.be.true;
                (0, _chai.expect)(_json_parsers.jEscapedCharP.run(text('\t')).isSuccess).to.be.true;
                (0, _chai.expect)(_json_parsers.jEscapedCharP.run(text('a')).isFailure).to.be.true;
            });
        });
        describe('a parser for escaped 4-digits unicode chars', function () {
            it('parses an escaped character and returns a Success', function () {
                var run = _json_parsers.jUnicodeCharP.run(text('\\u1a2e'));
                (0, _chai.expect)(run.isSuccess).to.be.true;
                (0, _chai.expect)(run.value[0]).to.be.eql(6702);
                (0, _chai.expect)(_json_parsers.jUnicodeCharP.run(text('\\u0010')).value[0]).to.be.eql(16);
                (0, _chai.expect)(_json_parsers.jUnicodeCharP.run(text('\\u000F')).value[0]).to.be.eql(15);
            });
        });
        describe('a parser for doublequoted JSON strings', function () {
            it('parses a lot of characters and returns a JValue.JString', function () {
                var run = _json_parsers.jStringP.run(text('\"test string\"')); // works also with unescaped doublequotes
                (0, _chai.expect)(run.isSuccess).to.be.true;
                (0, _chai.expect)(run.value[0].isJString).to.be.true;
                (0, _chai.expect)(run.value[0].value).to.be.eql('test string');
            });
            it('handles unicodes very roughly, and no escaped chars yet...', function () {
                var run = _json_parsers.jStringP.run(text('"test \\u0010 string"'));
                (0, _chai.expect)(run.isSuccess).to.be.true;
                (0, _chai.expect)(run.value[0].isJString).to.be.true;
                (0, _chai.expect)(run.value[0].value).to.be.eql('test 16 string');
            });
        });
        describe('a parser for numbers inside JSON files', function () {
            it('parses simple integers and returns Success\'es', function () {
                (0, _chai.expect)(_json_parsers.jNumberP.run(text('0')).value[0]).to.be.eql('0');
                (0, _chai.expect)(_json_parsers.jNumberP.run(text('0.1')).value[0]).to.be.eql('0.1');
                (0, _chai.expect)(_json_parsers.jNumberP.run(text('-0')).value[0]).to.be.eql('-0');
                (0, _chai.expect)(_json_parsers.jNumberP.run(text('-0.1')).value[0]).to.be.eql('-0.1');
                (0, _chai.expect)(_json_parsers.jNumberP.run(text('0.1234e145')).value[0]).to.be.eql('0.1234e145');
                (0, _chai.expect)(_json_parsers.jNumberP.run(text('-0.1234e-145')).value[0]).to.be.eql('-0.1234e-145');
                (0, _chai.expect)(_json_parsers.jNumberP.run(text('123')).value[0]).to.be.eql('123');
                (0, _chai.expect)(_json_parsers.jNumberP.run(text('123.12')).value[0]).to.be.eql('123.12');
                (0, _chai.expect)(_json_parsers.jNumberP.run(text('-123')).value[0]).to.be.eql('-123');
                (0, _chai.expect)(_json_parsers.jNumberP.run(text('-123.12')).value[0]).to.be.eql('-123.12');
                (0, _chai.expect)(_json_parsers.jNumberP.run(text('123e2')).value[0]).to.be.eql('123e2');
                (0, _chai.expect)(_json_parsers.jNumberP.run(text('-123e2')).value[0]).to.be.eql('-123e2');
                (0, _chai.expect)(_json_parsers.jNumberP.run(text('-123e-2')).value[0]).to.be.eql('-123e-2');
                (0, _chai.expect)(_json_parsers.jNumberP.run(text('-123.234e-2')).value[0]).to.be.eql('-123.234e-2');
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2pzLXNwZWMvanNvbl9wYXJzZXJfdGVzdHMuanMiXSwibmFtZXMiOlsidGV4dCIsImZyb21UZXh0IiwiZGVzY3JpYmUiLCJpdCIsInJ1biIsImlzU3VjY2VzcyIsInRvIiwiYmUiLCJ0cnVlIiwidmFsdWUiLCJpc0pOdWxsIiwiaXNGYWlsdXJlIiwiaXNKQm9vbCIsImZhbHNlIiwiZXFsIiwiaXNKU3RyaW5nIl0sIm1hcHBpbmdzIjoiOzs7QUFjQSxRQUFNQSxPQUFPLGtCQUFTQyxRQUF0Qjs7QUFFQUMsYUFBUyx3QkFBVCxFQUFtQyxZQUFNO0FBQ3JDQSxpQkFBUyx1QkFBVCxFQUFrQyxZQUFNO0FBQ3BDQyxlQUFHLHVEQUFILEVBQTRELFlBQU07QUFDOUQsb0JBQU1DLE1BQU0scUJBQU9BLEdBQVAsQ0FBVyxNQUFYLENBQVo7QUFDQSxrQ0FBT0EsSUFBSUMsU0FBWCxFQUFzQkMsRUFBdEIsQ0FBeUJDLEVBQXpCLENBQTRCQyxJQUE1QjtBQUNBLGtDQUFPSixJQUFJSyxLQUFKLENBQVUsQ0FBVixFQUFhQyxPQUFwQixFQUE2QkosRUFBN0IsQ0FBZ0NDLEVBQWhDLENBQW1DQyxJQUFuQztBQUNBLGtDQUFPLHFCQUFPSixHQUFQLENBQVcsTUFBWCxFQUFtQk8sU0FBMUIsRUFBcUNMLEVBQXJDLENBQXdDQyxFQUF4QyxDQUEyQ0MsSUFBM0M7QUFDSCxhQUxEO0FBTUgsU0FQRDtBQVFBTixpQkFBUyx1QkFBVCxFQUFrQyxZQUFNO0FBQ3BDQyxlQUFHLDZEQUFILEVBQWtFLFlBQU07QUFDcEUsb0JBQU1DLE1BQU0scUJBQU9BLEdBQVAsQ0FBVyxNQUFYLENBQVo7QUFDQSxrQ0FBT0EsSUFBSUMsU0FBWCxFQUFzQkMsRUFBdEIsQ0FBeUJDLEVBQXpCLENBQTRCQyxJQUE1QjtBQUNBLGtDQUFPSixJQUFJSyxLQUFKLENBQVUsQ0FBVixFQUFhRyxPQUFwQixFQUE2Qk4sRUFBN0IsQ0FBZ0NDLEVBQWhDLENBQW1DQyxJQUFuQztBQUNBLGtDQUFPSixJQUFJSyxL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QXhEO0FBQ0Esa0NBQU8sdUJBQVNWLEdBQVQsQ0FBYUosS0FBSyxTQUFMLENBQWIsRUFBOEJTLEtBQTlCLENBQW9DLENBQXBDLENBQVAsRUFBK0NILEVBQS9DLENBQWtEQyxFQUFsRCxDQUFxRE8sR0FBckQsQ0FBeUQsU0FBekQ7QUFDQSxrQ0FBTyx1QkFBU1YsR0FBVCxDQUFhSixLQUFLLGFBQUwsQ0FBYixFQUFrQ1MsS0FBbEMsQ0FBd0MsQ0FBeEMsQ0FBUCxFQUFtREgsRUFBbkQsQ0FBc0RDLEVBQXRELENBQXlETyxHQUF6RCxDQUE2RCxhQUE3RDtBQUNILGFBZkQ7QUFnQkgsU0FqQkQ7QUFrQkgsS0F0RkQiLCJmaWxlIjoianNvbl9wYXJzZXJfdGVzdHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2V4cGVjdH0gZnJvbSAnY2hhaSc7XG5pbXBvcnQge1xuICAgIEpOdWxsUCxcbiAgICBKQm9vbFAsXG4gICAgalVuZXNjYXBlZENoYXJQLFxuICAgIGpFc2NhcGVkQ2hhclAsXG4gICAgalVuaWNvZGVDaGFyUCxcbiAgICBqU3RyaW5nUCxcbiAgICBqTnVtYmVyUCxcbn0gZnJvbSAnanNvbl9wYXJzZXJzJztcbmltcG9ydCB7XG4gICAgUG9zaXRpb24sXG59IGZyb20gJ2NsYXNzZXMnO1xuXG5jb25zdCB0ZXh0ID0gUG9zaXRpb24uZnJvbVRleHQ7XG5cbmRlc2NyaWJlKCdidWlsZGluZyBhIEpTT04gcGFyc2VyJywgKCkgPT4ge1xuICAgIGRlc2NyaWJlKCdhIHBhcnNlciBmb3IgSk51bGxcXCdzJywgKCkgPT4ge1xuICAgICAgICBpdCgncGFyc2VzIHRoZSBzdHJpbmcgXFwnbnVsbFxcJyBhbmQgcmV0dXJucyBhIEpWYWx1ZS5KTnVsbCcsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJ1biA9IEpOdWxsUC5ydW4oJ251bGwnKTtcbiAgICAgICAgICAgIGV4cGVjdChydW4uaXNTdWNjZXNzKS50by5iZS50cnVlO1xuICAgICAgICAgICAgZXhwZWN0KHJ1bi52YWx1ZVswXS5pc0pOdWxsKS50by5iZS50cnVlO1xuICAgICAgICAgICAgZXhwZWN0KEpOdWxsUC5ydW4oJ251bHgnKS5pc0ZhaWx1cmUpLnRvLmJlLnRydWU7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIGRlc2NyaWJlKCdhIHBhcnNlciBmb3IgSkJvb2xcXCdzJywgKCkgPT4ge1xuICAgICAgICBpdCgncGFyc2VzIHRoZSBzdHJpbmcgXFwndHJ1ZVxcJyBhbmQgcmV0dXJucyBhIEpWYWx1ZS5KQm9vbCh0cnVlKScsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJ1biA9IEpCb29sUC5ydW4oJ3RydWUnKTtcbiAgICAgICAgICAgIGV4cGVjdChydW4uaXNTdWNjZXNzKS50by5iZS50cnVlO1xuICAgICAgICAgICAgZXhwZWN0KHJ1bi52YWx1ZVswXS5pc0pCb29sKS50by5iZS50cnVlO1xuICAgICAgICAgICAgZXhwZWN0KHJ1bi52YWx1ZVswXS52YWx1ZSkudG8uYmUudHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIGl0KCdwYXJzZXMgdGhlIHN0cmluZyBcXCdmYWxzZVxcJyBhbmQgcmV0dXJucyBhIEpWYWx1ZS5KQm9vbChmYWxzZSknLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBydW4gPSBKQm9vbFAucnVuKCdmYWxzZScpO1xuICAgICAgICAgICAgZXhwZWN0KHJ1bi5pc1N1Y2Nlc3MpLnRvLmJlLnRydWU7XG4gICAgICAgICAgICBleHBlY3QocnVuLnZhbHVlWzBdLmlzSkJvb2wpLnRvLmJlLnRydWU7XG4gICAgICAgICAgICBleHBlY3QocnVuLnZhbHVlWzBdLnZhbHVlKS50by5iZS5mYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICAgIGl0KCdmYWlscyB0byBwYXJzZSBhbnl0aGluZyBlbHNlJywgKCkgPT4ge1xuICAgICAgICAgICAgZXhwZWN0KEpCb29sUC5ydW4oJ3RydXgnKS5pc0ZhaWx1cmUpLnRvLmJlLnRydWU7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIGRlc2NyaWJlKCdhIHBhcnNlciBmb3IgSlNPTiB1bmVzY2FwZWQgY2hhcnMnLCAoKSA9PiB7XG4gICAgICAgIGl0KCdwYXJzZXMgYW4gdW5lc2NhcGVkIGNoYXJhY3RlciBhbmQgcmV0dXJucyBhIFN1Y2Nlc3MnLCAoKSA9PiB7XG4gICAgICAgICAgICBleHBlY3QoalVuZXNjYXBlZENoYXJQLnJ1bih0ZXh0KCdhJykpLmlzU3VjY2VzcykudG8uYmUudHJ1ZTtcbiAgICAgICAgICAgIGV4cGVjdChqVW5lc2NhcGVkQ2hhclAucnVuKHRleHQoJ0EnKSkuaXNTdWNjZXNzKS50by5iZS50cnVlO1xuICAgICAgICAgICAgZXhwZWN0KGpVbmVzY2FwZWRDaGFyUC5ydW4odGV4dCgnMScpKS5pc1N1Y2Nlc3MpLnRvLmJlLnRydWU7XG4gICAgICAgICAgICBleHBlY3QoalVuZXNjYXBlZENoYXJQLnJ1bih0ZXh0KCdcIicpKS5pc0ZhaWx1cmUpLnRvLmJlLnRydWU7XG4gICAgICAgICAgICBleHBlY3QoalVuZXNjYXBlZENoYXJQLnJ1bih0ZXh0KCdcXFxcJykpLmlzRmFpbHVyZSkudG8uYmUudHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgZGVzY3JpYmUoJ2EgcGFyc2VyIGZvciBKU09OIGVzY2FwZWQgY2hhcnMnLCAoKSA9PiB7XG4gICAgICAgIGl0KCdwYXJzZXMgYW4gZXNjYXBlZCBjaGFyYWN0ZXIgYW5kIHJldHVybnMgYSBTdWNjZXNzJywgKCkgPT4ge1xuICAgICAgICAgICAgZXhwZWN0KGpFc2NhcGVkQ2hhclAucnVuKHRleHQoJ1xcYicpKS5pc1N1Y2Nlc3MpLnRvLmJlLnRydWU7XG4gICAgICAgICAgICBleHBlY3QoakVzY2FwZWRDaGFyUC5ydW4odGV4dCgnXFxmJykpLmlzU3VjY2VzcykudG8uYmUudHJ1ZTtcbi8vICAgICAgICAgICAgZXhwZWN0KGpFc2NhcGVkQ2hhclAucnVuKHRleHQoJ1xcbicpKS5pc1N1Y2Nlc3MpLnRvLmJlLnRydWU7XG4gICAgICAgICAgICBleHBlY3QoakVzY2FwZWRDaGFyUC5ydW4odGV4dCgnXFxyJykpLmlzU3VjY2VzcykudG8uYmUudHJ1ZTtcbiAgICAgICAgICAgIGV4cGVjdChqRXNjYXBlZENoYXJQLnJ1bih0ZXh0KCdcXHQnKSkuaXNTdWNjZXNzKS50by5iZS50cnVlO1xuICAgICAgICAgICAgZXhwZWN0KGpFc2NhcGVkQ2hhclAucnVuKHRleHQoJ2EnKSkuaXNGYWlsdXJlKS50by5iZS50cnVlO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBkZXNjcmliZSgnYSBwYXJzZXIgZm9yIGVzY2FwZWQgNC1kaWdpdHMgdW5pY29kZSBjaGFycycsICgpID0+IHtcbiAgICAgICAgaXQoJ3BhcnNlcyBhbiBlc2NhcGVkIGNoYXJhY3RlciBhbmQgcmV0dXJucyBhIFN1Y2Nlc3MnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBydW4gPSBqVW5pY29kZUNoYXJQLnJ1bih0ZXh0KCdcXFxcdTFhMmUnKSk7XG4gICAgICAgICAgICBleHBlY3QocnVuLmlzU3VjY2VzcykudG8uYmUudHJ1ZTtcbiAgICAgICAgICAgIGV4cGVjdChydW4udmFsdWVbMF0pLnRvLmJlLmVxbCg2NzAyKTtcbiAgICAgICAgICAgIGV4cGVjdChqVW5pY29kZUNoYXJQLnJ1bih0ZXh0KCdcXFxcdTAwMTAnKSkudmFsdWVbMF0pLnRvLmJlLmVxbCgxNik7XG4gICAgICAgICAgICBleHBlY3QoalVuaWNvZGVDaGFyUC5ydW4odGV4dCgnXFxcXHUwMDBGJykpLnZhbHVlWzBdKS50by5iZS5lcWwoMTUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBkZXNjcmliZSgnYSBwYXJzZXIgZm9yIGRvdWJsZXF1b3RlZCBKU09OIHN0cmluZ3MnLCAoKSA9PiB7XG4gICAgICAgIGl0KCdwYXJzZXMgYSBsb3Qgb2YgY2hhcmFjdGVycyBhbmQgcmV0dXJucyBhIEpWYWx1ZS5KU3RyaW5nJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcnVuID0galN0cmluZ1AucnVuKHRleHQoJ1xcXCJ0ZXN0IHN0cmluZ1xcXCInKSk7IC8vIHdvcmtzIGFsc28gd2l0aCB1bmVzY2FwZWQgZG91YmxlcXVvdGVzXG4gICAgICAgICAgICBleHBlY3QocnVuLmlzU3VjY2VzcykudG8uYmUudHJ1ZTtcbiAgICAgICAgICAgIGV4cGVjdChydW4udmFsdWVbMF0uaXNKU3RyaW5nKS50by5iZS50cnVlO1xuICAgICAgICAgICAgZXhwZWN0KHJ1bi52YWx1ZVswXS52YWx1ZSkudG8uYmUuZXFsKCd0ZXN0IHN0cmluZycpO1xuICAgICAgICB9KTtcbiAgICAgICAgaXQoJ2hhbmRsZXMgdW5pY29kZXMgdmVyeSByb3VnaGx5LCBhbmQgbm8gZXNjYXBlZCBjaGFycyB5ZXQuLi4nLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBydW4gPSBqU3RyaW5nUC5ydW4odGV4dCgnXFxcInRlc3QgXFxcXHUwMDEwIHN0cmluZ1xcXCInKSk7XG4gICAgICAgICAgICBleHBlY3QocnVuLmlzU3VjY2VzcykudG8uYmUudHJ1ZTtcbiAgICAgICAgICAgIGV4cGVjdChydW4udmFsdWVbMF0uaXNKU3RyaW5nKS50by5iZS50cnVlO1xuICAgICAgICAgICAgZXhwZWN0KHJ1bi52YWx1ZVswXS52YWx1ZSkudG8uYmUuZXFsKCd0ZXN0IDE2IHN0cmluZycpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBkZXNjcmliZSgnYSBwYXJzZXIgZm9yIG51bWJlcnMgaW5zaWRlIEpTT04gZmlsZXMnLCAoKSA9PiB7XG4gICAgICAgIGl0KCdwYXJzZXMgc2ltcGxlIGludGVnZXJzIGFuZCByZXR1cm5zIFN1Y2Nlc3NcXCdlcycsICgpID0+IHtcbiAgICAgICAgICAgIGV4cGVjdChqTnVtYmVyUC5ydW4odGV4dCgnMCcpKS52YWx1ZVswXSkudG8uYmUuZXFsKCcwJyk7XG4gICAgICAgICAgICBleHBlY3Qoak51bWJlclAucnVuKHRleHQoJzAuMScpKS52YWx1ZVswXSkudG8uYmUuZXFsKCcwLjEnKTtcbiAgICAgICAgICAgIGV4cGVjdChqTnVtYmVyUC5ydW4odGV4dCgnLTAnKSkudmFsdWVbMF0pLnRvLmJlLmVxbCgnLTAnKTtcbiAgICAgICAgICAgIGV4cGVjdChqTnVtYmVyUC5ydW4odGV4dCgnLTAuMScpKS52YWx1ZVswXSkudG8uYmUuZXFsKCctMC4xJyk7XG4gICAgICAgICAgICBleHBlY3Qoak51bWJlclAucnVuKHRleHQoJzAuMTIzNGUxNDUnKSkudmFsdWVbMF0pLnRvLmJlLmVxbCgnMC4xMjM0ZTE0NScpO1xuICAgICAgICAgICAgZXhwZWN0KGpOdW1iZXJQLnJ1bih0ZXh0KCctMC4xMjM0ZS0xNDUnKSkudmFsdWVbMF0pLnRvLmJlLmVxbCgnLTAuMTIzNGUtMTQ1Jyk7XG4gICAgICAgICAgICBleHBlY3Qoak51bWJlclAucnVuKHRleHQoJzEyMycpKS52YWx1ZVswXSkudG8uYmUuZXFsKCcxMjMnKTtcbiAgICAgICAgICAgIGV4cGVjdChqTnVtYmVyUC5ydW4odGV4dCgnMTIzLjEyJykpLnZhbHVlWzBdKS50by5iZS5lcWwoJzEyMy4xMicpO1xuICAgICAgICAgICAgZXhwZWN0KGpOdW1iZXJQLnJ1bih0ZXh0KCctMTIzJykpLnZhbHVlWzBdKS50by5iZS5lcWwoJy0xMjMnKTtcbiAgICAgICAgICAgIGV4cGVjdChqTnVtYmVyUC5ydW4odGV4dCgnLTEyMy4xMicpKS52YWx1ZVswXSkudG8uYmUuZXFsKCctMTIzLjEyJyk7XG4gICAgICAgICAgICBleHBlY3Qoak51bWJlclAucnVuKHRleHQoJzEyM2UyJykpLnZhbHVlWzBdKS50by5iZS5lcWwoJzEyM2UyJyk7XG4gICAgICAgICAgICBleHBlY3Qoak51bWJlclAucnVuKHRleHQoJy0xMjNlMicpKS52YWx1ZVswXSkudG8uYmUuZXFsKCctMTIzZTInKTtcbiAgICAgICAgICAgIGV4cGVjdChqTnVtYmVyUC5ydW4odGV4dCgnLTEyM2UtMicpKS52YWx1ZVswXSkudG8uYmUuZXFsKCctMTIzZS0yJyk7XG4gICAgICAgICAgICBleHBlY3Qoak51bWJlclAucnVuKHRleHQoJy0xMjMuMjM0ZS0yJykpLnZhbHVlWzBdKS50by5iZS5lcWwoJy0xMjMuMjM0ZS0yJyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG4iXX0=